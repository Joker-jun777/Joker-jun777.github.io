var t=Object.defineProperty,o=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(o,e,a)=>e in o?t(o,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[e]=a;import{m as r,s as i,r as l,h as d,n as p,o as n,b as c,d as h,F as u,c as m,w as b,a as g,p as x,g as y,i as k}from"./index.20f81e3c.js";import{_ as f}from"./plugin-vue_export-helper.21dcd24c.js";var I=f({data:()=>({id:"",xxx:[],phoAdr:[],images:null,bookChapter:[],query:null,ord:null}),computed:{},onLoad(t){console.log(r()[0].$page.options.bookId),this.query=((t,r)=>{for(var i in r||(r={}))e.call(r,i)&&s(t,i,r[i]);if(o)for(var i of o(r))a.call(r,i)&&s(t,i,r[i]);return t})({},r()[0].$page.options),this.id=t.id,console.log("xxx:",t,"\n"),i({title:"加载中"}),l({url:`https://apis.netstart.cn/mbcomic/ComicDetail?comic_id=${t.bookId}`,success:t=>{var o,e;this.bookChapter=[...null==(o=t.data.data)?void 0:o.ep_list].sort(((t,o)=>t.id-o.id)),this.ord=null==(e=this.bookChapter[this.bookChapter.findIndex((t=>t.id==this.query.id))])?void 0:e.ord,console.log("ord:",this.ord,"\n")},complete(){d()}}),i({title:"加载中"}),l({url:`https://apis.netstart.cn/mbcomic/GetImageIndex?ep_id=${t.id}`,success:t=>{console.log(t.data.data),this.images=t.data.data.images,this.xxx=t.data.data.images.map((t=>`https://apis.netstart.cn/mbcomic/ImageToken?urls=["${t.path}@660w.jpg"]`));let o=this.xxx.map((t=>l({url:t})));Promise.all(o).then((t=>{this.phoAdr=t.map((t=>t.data.data[0].url+"?token="+t.data.data[0].token))})),l({url:this.xxx[3],success:t=>{}})},complete(){d()}})},onPageScroll(t){0==t.scrollTop&&1!=this.ord&&this.bookChapter&&p({url:`/pages/play/play?id=${this.bookChapter[this.ord-2].id}&bookId=${this.query.bookId}`,success(){location.reload()}})},onReachBottom(){this.bookChapter&&this.ord!=this.bookChapter.length&&p({url:`/pages/play/play?id=${this.bookChapter[this.ord].id}&bookId=${this.query.bookId}`,success(){location.reload()}})},methods:{yyy(t){console.log(t);let o={};i({title:"加载中"}),l({url:`https://apis.netstart.cn/mbcomic/ImageToken?urls=["${t}@660w.jpg"]`,success:t=>(o=t.data.data[0],o.url+"?token="+o.token),complete(){d()}})}},watch:{xxx:{handler(t,o){}}}},[["render",function(t,o,e,a,s,r){const i=y,l=k;return n(!0),c(u,null,h(s.phoAdr,((t,o)=>(n(),m(l,{key:o},{default:b((()=>[g(i,{src:`${t}`,style:x(`width:750rpx;height:${s.images[o].y/s.images[o].x*750}rpx`)},null,8,["src","style"])])),_:2},1024)))),128)}]]);export{I as default};
